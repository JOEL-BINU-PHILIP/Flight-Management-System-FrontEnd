<div class="container mt-5">
  <div class="row justify-content-center">
    <div class="col-md-8">
      <h2 class="text-center mb-4">View Ticket Details</h2>

      <!-- Search Form -->
      <div class="card mb-4">
        <div class="card-body">
          <div class="input-group">
            <input 
              type="text" 
              class="form-control" 
              placeholder="Enter PNR Number"
              [(ngModel)]="pnr"
              (keyup.enter)="searchTicket()">
            <button 
              class="btn btn-primary" 
              type="button"
              (click)="searchTicket()"
              [disabled]="loading">
              <span *ngIf="loading" class="spinner-border spinner-border-sm me-2"></span>
              Search Ticket
            </button>
          </div>
        </div>
      </div>

      <!-- Error Message -->
      <div *ngIf="error" class="alert alert-danger" role="alert">
        {{ error }}
      </div>

      <!-- Ticket Details -->
      <div *ngIf="ticket" class="card ticket-card">
        <div class="card-header bg-primary text-white d-flex justify-content-between align-items-center">
          <h4 class="mb-0">E-Ticket</h4>
          <button class="btn btn-light btn-sm" (click)="printTicket()">
            <i class="bi bi-printer"></i> Print
          </button>
        </div>
        <div class="card-body">
          <!-- Booking Status -->
          <div class="alert" [ngClass]="ticket.booking.cancelled ? 'alert-danger' : 'alert-success'">
            <strong>Status:</strong> {{ ticket.booking. cancelled ? 'CANCELLED' : 'CONFIRMED' }}
          </div>

          <!-- Flight Information -->
          <div class="row mb-4">
            <div class="col-md-6">
              <h5>Flight Details</h5>
              <p><strong>Flight Number:</strong> {{ ticket.flight. flightNumber }}</p>
              <p><strong>Airline: </strong> {{ ticket.flight.airlineName }}</p>
              <p><strong>From:</strong> {{ ticket.flight.fromPlace }}</p>
              <p><strong>To:</strong> {{ ticket. flight.toPlace }}</p>
            </div>
            <div class="col-md-6">
              <h5>Journey Details</h5>
              <p><strong>Departure:</strong> {{ ticket.flight.departureTime }}</p>
              <p><strong>Arrival:</strong> {{ ticket.flight.arrivalTime }}</p>
              <p><strong>Price:</strong> â‚¹{{ ticket.flight.price }}</p>
            </div>
          </div>

          <!-- Booking Information -->
          <div class="mb-4">
            <h5>Booking Information</h5>
            <p><strong>PNR:</strong> {{ ticket. booking.pnr }}</p>
            <p><strong>Email:</strong> {{ ticket.booking. email }}</p>
            <p><strong>Seats Booked:</strong> {{ ticket.booking. seatsBooked }}</p>
            <p><strong>Booking Time:</strong> {{ ticket.booking.bookingTime | date:'medium' }}</p>
            <p *ngIf="ticket.booking. cancelled">
              <strong>Cancelled At:</strong> {{ ticket.booking. cancelledAt | date:'medium' }}
            </p>
          </div>

          <!-- Passenger Details -->
          <div class="mb-4">
            <h5>Passenger Details</h5>
            <div class="table-responsive">
              <table class="table table-bordered">
                <thead class="table-light">
                  <tr>
                    <th>Name</th>
                    <th>Gender</th>
                    <th>Age</th>
                    <th>Seat Number</th>
                    <th>Meal Preference</th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let passenger of ticket.passengers">
                    <td>{{ passenger.name }}</td>
                    <td>{{ passenger.gender }}</td>
                    <td>{{ passenger.age }}</td>
                    <td>{{ passenger.seatNumber }}</td>
                    <td>{{ passenger.meal }}</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>